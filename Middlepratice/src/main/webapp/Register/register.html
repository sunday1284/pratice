<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>회원 가입</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <form id="registrationForm" action="/register" method="POST">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required /><br />

      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required /><br />

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required /><br />

      <button type="button" id="registerButton">Register</button>
    </form>
    <div id="massage"></div>

    <script>
      $("#registerButton").on("click", function () {
        const data = {
          username: $("#username").val(),
          password: $("#password").val(),
          email: $("#email").val(),
        };

        $.ajax({
          url: "/register",  // 서블릿 경로 확인
          method: "POST",
          contentType: "application/x-www-form-urlencoded",  // 데이터 타입 설정
          data: $.param(data),  // 데이터 인코딩
          success: function (response) {  // response 파라미터 추가
            $("#massage").text(response);
          },
          error: function () {
            $("#massage").text("에러입니다...");
          },
        });
      });
    </script>
  </body>
</html>
